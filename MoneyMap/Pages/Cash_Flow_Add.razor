@page "/Cash_Flow_Add"
@using MoneyMap.Data;
@inject NavigationManager NM;
@inject Cash_Flow_Service CFS

<h2>Add Transaction</h2>
<EditForm Model=@cf OnInvalidSubmit ="ValidFormSubmitted" OnValidSubmit="InvalidFormSubmitted">
    <DataAnnotationsValidator/>
    <ValidationSummary/>
    <div class="row">
        <div class=" col-md-4">
            <div class=" form-group">
                <label for="movement_date" class="control-label">Date</label>
                <input for="movement_date" class="form-control" @bind=cf.movement_date />
            </div>
            <div class=" form-group">
                <label for="movement" class="control-label">Movement</label>
                <input for="movement" class="form-control" @bind=cf.movement />
            </div>
            <div class=" form-group">
                <label for="description" class="control-label">Description</label>
                <input for="description" class="form-control" @bind=cf.description />
            </div>
            <div class=" form-group">
                <label for="dd" class="control-label">Details</label>
                <input for="dd" class="form-control" @bind=cf.detailed_description />
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-primary" value="Save">
                <input type="button" class="btn btn-primary" value="Back" @onclick="Cancel">

            </div>

        </div>
    </div>
                
</EditForm>

@code{
    public Cash_Flow cf = new();

    public void ValidFormSubmitted(EditContext context){
        CFS.Create(cf);
    }

    public void InvalidFormSubmitted(EditContext context){
        return;
    }
    public void Cancel(){
        NM.NavigateTo("/");
    }
}